<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Message Preview ‚Äî Human (Study)</title>
<!-- redeploy again>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9NKT0MDZ5B"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9NKT0MDZ5B');
</script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --card-radius:0px;
    --shadow:0 6px 22px rgba(12,20,30,0.08);
    --gap:14px;
    --maxw:920px;
    
    /* Dark bg for all pages */
    --dark-bg: #1e1e21;

    /* Urgency (human) */
    --dark-card: #2f2f32;
    --dark-text: #f0f0f0;
    --dark-muted: #98989a;
    --dark-link: #4da6ff;
    --dark-tab-bg: #2f2f32;
    --dark-tab-border: #404043;
    --dark-report-red: #ff6666;

    /* FAMILIARITY (human, the discord theme one) */
    --discord-bg: #313338;
    --discord-input: #383a40;
    --discord-text-main: #dbdee1;
    --discord-text-header: #f2f3f5;
    --discord-text-muted: #949ba4;
    --discord-link: #00a8fc;
    
    /* AUTHORITY (human, outlook theme) */
    --outlook-bg: #ffffff;
    --outlook-text: #242424;
    --outlook-header: #5c5c5c;
    --outlook-link: #005a9e; 
    --outlook-border: #eaeaea;
    --outlook-avatar-bg: #d2d2d2;
    
    /* FEAR (human, help center theme) */
    --help-bg: #f0f2f5;
    --help-card: #ffffff; 
    --help-border: #dddfe2; 
    --help-text-main: #1c1e21; 
    --help-text-muted: #606770; 
    --help-link: #1877f2;
    --help-tool-bg: #e4e6eb; 

    /* CURIOSITY (human, gambling theme, WHAT RAINBET?) */
    --gambling-bg-dark: #101827;
    --gambling-bg-light: #1c2a46;
    --gambling-gradient: linear-gradient(145deg, var(--gambling-bg-light) 0%, #0d121c 100%);
    --gambling-text: #ffffff;
    --gambling-accent: #00e0ff;
    --gambling-link: #3498db;
    --gambling-modal-bg: rgba(28, 42, 70, 0.95); 
    --gambling-modal-border: #00e0ff;
  }

  body { font-family: "Segoe UI", "Inter", system-ui, -apple-system, sans-serif; background:var(--dark-bg); margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px; color:#0b2545; }
  .wrap { width:100%; max-width:var(--maxw); display:grid; grid-template-columns:1fr; gap:20px; }
  
  /* Utils */
  .card { background:white; border-radius:var(--card-radius); box-shadow:var(--shadow); padding:20px; box-sizing:border-box; }
  .cta { display:inline-block; padding:10px 14px; border-radius:10px; background:#007bff; color:white; text-decoration:none; font-weight:700; box-shadow:0 3px 10px rgba(0,123,255,0.12); cursor:pointer; }
  .cta:active { transform:translateY(1px); }
  .link-text { color:#0062cc; text-decoration:underline; cursor:pointer; font-weight:600; margin-left:10px; display:inline-block; }

  /* --- URGENCY styles --- */
  .dark-card { background:var(--dark-card); box-shadow:none; color:var(--dark-text); padding:0; border-radius: 0; }
  .dark-title { font-size:24px; font-weight:700; margin:0 0 20px 0; padding: 24px 24px 0 24px; color:var(--dark-text); }
  .dark-tabs-container { background:var(--dark-tab-bg); border-bottom:1px solid var(--dark-tab-border); display:flex; padding:0 24px; width: 100%; box-sizing: border-box; }
  .dark-tab { padding:14px 20px; font-weight:600; cursor:pointer; color:var(--dark-muted); border-bottom:3px solid transparent; margin-right: 12px; }
  .dark-tab.active { color:var(--dark-text); border-bottom-color:var(--dark-link); }
  .dark-inbox-wrap { padding: 24px; }
  .dark-inbox-header { display:flex; align-items:center; gap:8px; margin-bottom: 24px; padding-bottom: 8px; border-bottom: 1px solid var(--dark-tab-border); }
  .dark-archive-btn { color:var(--dark-muted); padding:0; border:none; background:transparent; cursor:pointer; font-size: 14px; }
  .dark-message-body { padding-top: 12px; }
  .dark-msg-line { margin:10px 0; }
  .dark-msg-top { display:flex; gap:10px; align-items:center; margin-bottom:16px; }
  .dark-avatar-wrap { width:40px; height:40px; position: relative; }
  .dark-avatar-wrap img { width:100%; height:100%; object-fit:cover; border-radius: 50%; z-index: 2; position: relative; }
  .dark-avatar-wrap::before { content: ''; position: absolute; top: -4px; left: -4px; width: 48px; height: 48px; border-radius: 50%; background: white; z-index: 1; }
  .dark-meta { font-size:13px; color:var(--dark-muted); }
  .dark-msg-title { font-size:18px; font-weight:700; color:var(--dark-text); margin:0 0 4px 0; }
  .dark-main-text { font-size:15px; color:var(--dark-text); line-height:1.5; }
  .dark-link-text { color:var(--dark-link); font-weight:600; cursor:pointer; display:inline-block; margin-top:8px; }
  .dark-report-abuse { color:var(--dark-report-red); font-size:14px; cursor:pointer; }

  /* FAMILIARITY (styles, discord theme, human)  */
  .discord-card { background-color: var(--discord-bg); color: var(--discord-text-main); padding: 16px; font-family: 'gg sans', 'Inter', sans-serif; border-radius: 4px; }
  .discord-header-area { padding: 16px 16px 24px 16px; margin-bottom: 16px; }
  .discord-big-avatar { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 12px; background-color: var(--discord-input); }
  .discord-display-name { font-size: 28px; font-weight: 700; color: var(--discord-text-header); margin: 0; line-height: 1.2; }
  .discord-username { font-size: 20px; font-weight: 500; color: var(--discord-text-header); margin: 0 0 16px 0; }
  .discord-intro-text { color: var(--discord-text-muted); font-size: 14px; line-height: 1.4; }
  .discord-intro-text strong { color: var(--discord-text-header); font-weight: 600; }
  .discord-message-row { display: flex; gap: 16px; padding: 2px 16px; margin-top: 16px; }
  .discord-message-row:hover { background-color: rgba(2, 2, 2, 0.03); }
  .discord-pfp { width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0; cursor: pointer; }
  .discord-content { flex: 1; }
  .discord-name-line { display: flex; align-items: baseline; gap: 8px; margin-bottom: 4px; }
  .discord-sender { color: var(--discord-text-header); font-weight: 600; font-size: 16px; cursor: pointer; }
  .discord-sender:hover { text-decoration: underline; }
  .discord-timestamp { color: var(--discord-text-muted); font-size: 0.75rem; font-weight: 500; }
  .discord-body { font-size: 16px; line-height: 1.375rem; color: var(--discord-text-main); white-space: pre-wrap; }
  .discord-link { color: var(--discord-link); cursor: pointer; text-decoration: none; }
  .discord-link:hover { text-decoration: underline; }
  .discord-input-container { margin-top: 24px; padding: 0 16px; }
  .discord-input-bar { background-color: var(--discord-input); border-radius: 8px; display: flex; align-items: center; padding: 10px 16px; color: var(--discord-text-muted); font-size: 15px; }
  .discord-plus-icon { width: 24px; height: 24px; background: #b5bac1; color: var(--discord-input); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 18px; margin-right: 16px; cursor: pointer; }
  .discord-input-text { flex: 1; cursor: text; }
  .discord-icons { display: flex; gap: 12px; font-size: 20px; filter: grayscale(1); opacity: 0.7; }

  /* AUTHORITY (human, outlook theme) */
  .outlook-card {
    background: var(--outlook-bg);
    padding: 0; 
    font-family: "Segoe UI", sans-serif;
    color: var(--outlook-text);
  }
  .outlook-header {
    padding: 16px 24px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }
  .outlook-sender-info {
    display: flex;
    gap: 12px;
    align-items: center;
  }
  .outlook-avatar-circle {
    width: 48px;
    height: 48px;
    background-color: var(--outlook-avatar-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #555;
    font-weight: 600;
    font-size: 18px;
  }
  .outlook-sender-text {
    display: flex;
    flex-direction: column;
  }
  .outlook-name {
    font-size: 16px;
    font-weight: 600;
    color: #242424;
  }
  .outlook-to {
    font-size: 13px;
    color: #666;
  }
  .outlook-actions-area {
    text-align: right;
  }
  .outlook-action-icons {
    display: flex;
    gap: 16px;
    justify-content: flex-end;
    margin-bottom: 4px;
    color: #005a9e; 
    font-size: 14px;
    font-weight: 500;
  }
  .outlook-icon-item {
    display: flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
  }
  .outlook-date {
    font-size: 12px;
    color: #666;
  }
  
  /* scrollable thingy in outlook */
  .outlook-scroll-container {
    max-height: 400px; 
    overflow-y: auto;
    padding: 0 24px 24px 24px;
    border-top: 1px solid transparent; /* spacing fix */
  }
  
  .outlook-body-text {
    font-size: 14px;
    line-height: 1.6;
    margin-top: 16px;
    color: #242424;
  }
  .outlook-link {
    color: var(--outlook-link);
    text-decoration: underline;
    font-weight: 600;
    cursor: pointer;
  }
  .outlook-signature-stack {
    margin-top: 24px;
    font-size: 14px;
    line-height: 1.4;
    color: #242424;
  }
  .outlook-canvas-logo {
    display: block;
    margin: 32px auto;
    max-width: 140px;
  }
  .outlook-footer-links {
    text-align: center;
    font-size: 12px;
    color: var(--outlook-link);
    margin-bottom: 24px;
  }
  .outlook-footer-links span {
    text-decoration: underline;
    cursor: pointer;
    margin: 0 4px;
  }
  .outlook-disclaimer {
    font-size: 11px;
    color: #777;
    border-top: 1px solid #eaeaea;
    padding-top: 12px;
    line-height: 1.4;
  }
  .outlook-bottom-btns {
    padding: 16px 24px;
    border-top: 1px solid #eaeaea;
    display: flex;
    gap: 12px;
  }
  .outlook-chip {
    border: 1px solid #d1d1d1;
    border-radius: 4px;
    padding: 6px 16px;
    font-size: 14px;
    color: #242424;
    background: #fff;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .outlook-chip:hover {
    background: #f5f5f5;
  }

  /* --- FEAR (help center thing) style --- */
  .help-card {
      background-color: var(--help-bg);
      padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      color: var(--help-text-main);
      border-radius: 8px;
      overflow: hidden;
  }
  .help-header {
      background-color: var(--help-card);
      padding: 16px 24px;
      border-bottom: 1px solid var(--help-border);
      font-size: 20px;
      font-weight: 700;
      color: var(--help-link);
  }
  .help-content-area {
      padding: 24px;
  }
  .help-warning-box {
      background-color: #f7f3e8; 
      border: 1px solid #f0e3c5;
      border-left: 5px solid #ffba00;
      padding: 16px;
      border-radius: 4px;
      margin-bottom: 20px;
  }
  .help-warning-title {
      font-weight: 600;
      color: #b27a00;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
  }
  .help-body-text {
      font-size: 15px;
      line-height: 1.5;
      color: var(--help-text-main);
  }
  .help-tool-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background-color: var(--help-tool-bg);
      padding: 10px 16px;
      border-radius: 6px;
      text-decoration: none;
      color: var(--help-text-main);
      font-weight: 600;
      margin-top: 20px;
      transition: background-color 0.1s;
  }
  .help-tool-link:hover {
      background-color: #d8dade;
  }
  .help-footer-text {
      font-size: 12px;
      color: var(--help-text-muted);
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid var(--help-border);
  }

  /* --- CURIOSITY (gambling woo) styles --- */
  .gambling-card {
      background: var(--gambling-gradient);
      color: var(--gambling-text);
      padding: 0;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
  }
  /* blur */
  .gambling-background-blur {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      filter: blur(8px);
      opacity: 0.4;
      z-index: 1;
      pointer-events: none;
  }
  .gambling-background-blur::before {
      content: 'üí∞üíéüé∞‚ú®'; /* Gambling elements kaching kaching  */
      position: absolute;
      top: 10%;
      left: 5%;
      font-size: 150px;
      transform: rotate(-15deg);
  }
  .gambling-background-blur::after {
      content: 'üí∏üëëüîî7Ô∏è‚É£';
      position: absolute;
      bottom: 15%;
      right: 10%;
      font-size: 180px;
      transform: rotate(20deg);
  }
  /* Modal container */
  .gambling-modal {
      position: relative; 
      z-index: 2;
      padding: 30px;
      text-align: center;
      background: var(--gambling-modal-bg);
      border: 2px solid var(--gambling-modal-border);
      border-radius: 10px;
      margin: 40px;
  }
  .gambling-title {
      font-size: 28px;
      font-weight: 800;
      color: var(--gambling-accent);
      margin: 0 0 10px 0;
      text-shadow: 0 0 10px rgba(0, 224, 255, 0.5);
  }
  .gambling-body {
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 20px;
  }
  .gambling-link-btn {
      display: inline-block;
      padding: 12px 25px;
      border-radius: 8px;
      background: var(--gambling-accent);
      color: #101827;
      text-decoration: none;
      font-weight: 700;
      font-size: 16px;
      box-shadow: 0 4px 15px rgba(0, 224, 255, 0.4);
      transition: transform 0.1s;
  }
  .gambling-link-btn:active {
      transform: scale(0.98);
  }

  /* Legacy styles */
  .title { font-size:18px; font-weight:700; margin:0 0 8px 0; color:#0b2545; }
  .sub { color:#516074; font-size:14px; margin:8px 0; }
  .small { font-size:13px; color:#5f6b75; }
  .muted { color:#7e8b93; font-size:13px; }
  .oldmail { font-family: "Times New Roman", Times, serif; background:#fff; border-radius:6px; padding:18px; border:1px solid #ddd; }
  .dark-reward { background:linear-gradient(135deg,#5a2db3,#b26be6); color:white; padding:20px; border-radius:12px; text-align:center; }
  .ai-badge { background:#e8f0ff; padding:6px 8px; border-radius:999px; display:inline-block; font-weight:700; color:#0b66d1; }
  .hr { height:1px; background:#eef3f6; margin:12px 0; border-radius:2px; }
  .muted-sm { font-size:13px; color:#98a2ad; }
  .tiny { font-size:12px; color:#97a0a6; }
  @media (min-width:880px){ .wrap { grid-template-columns:1fr } }

 

  /* Mobile props */
  @media (max-width: 480px) {
  body {
    padding: 12px;
  }

  .wrap {
    gap: 14px;
  }

  .card {
    padding: 16px;
  }

  .title {
    font-size: 16px;
  }

  .sub, .bubble, .docbox, .warning, .meta {
    font-size: 13px;
  }

  .cta {
    padding: 10px 14px;
    font-size: 14px;
  }

  /* Chat bubble */
  .chat .bubble {
    max-width: 100%;
  }
}

/* Tablets (481px - 768px i believe ehh) */
@media (max-width: 768px) {
  body {
    padding: 18px;
  }

  .card {
    padding: 20px;
  }

  .title {
    font-size: 17px;
  }
}

/* Large screens (>1100px) */
@media (min-width: 1100px) {
  .wrap {
    max-width: 760px; 
  }
}

</style>
</head>
<body>
  <div class="wrap" id="wrap">
  </div>

<script>
/* Teh script woah  */

/* LINK HERE!!  */
const FORM_LINK = "https://forms.office.com/Pages/ResponsePage.aspx?id=3F6kgO7V4EaddTfEe-m3zK4qozDLuUJCmdm-8GlwI-1UMzFMSkxZMFlJMFVROEVDRjhBMjFNQzBJTS4u";

/* Human messages pool */
const humanMessages = [
  { id: "HUM_CURIO_01", type: "curiosity", title: "Congratulations!", body: `You have been randomly selected to be one of the only 50 participants eligible to receive an exclusive reward! Kindly visit the official link using the button, confirm your participation, and review the details of the reward. We appreciate your participation enjoy your special access!
.
`, link: FORM_LINK },
  { id: "HUM_FEAR_02", type: "fear", title: "Legal Notice - Immediate Attention Required", body: `We are contacting you on behalf of the Ministry of Foreign Affairs. The CID is filing a case against you. Visit this link immediately for more information. Failure to comply will result in arrest warrants and freezing of property and bank accounts.`, link: FORM_LINK },
  
  /* URGENCY */
  {
    id: "HUM_URG_03",
    type: "urgency",
    title: "Make It R$ Rain!", 
    body: `You've been selected to receive 500 Robux for playing our latest experience. This reward expires in 24 hours, and once it's gone, it's gone.`, 
    link: FORM_LINK,
    profileName: "Exml",
    profileHandle: "@exml_py",
    avatar: "https://tr.rbxcdn.com/30DAY-AvatarHeadshot-83AE24A7165577DA7259C88EA7EA1D82-Png/150/150/AvatarHeadshot/Webp/noFilter"
  },
  
  /* FAMILIARITY */
  {
    id: "HUM_FAM_04",
    type: "familiarity",
    title: "clowneroo", 
    body: `Broo can you pls help me? üò≠ I got locked out of my main FB account and it said I needed someone to prove Im real and that my acc was real!

Heres the link btw: `, 
    link: FORM_LINK,
    avatar: "https://media.discordapp.net/attachments/1299289173823459349/1448399879876378654/411d8a698dd15ddf.png?ex=693b1f01&is=6939cd81&hm=e314389487166ab3471bc8241a9b42bfe2eec74bfa652a47628aeddf03474d30&=&format=webp&quality=lossless&width=320&height=320"
  },

  /* AUTHORITY: REDESIGNED OUTLOOK MOCK */
  {
    id: "HUM_AUTH_05",
    type: "authority",
    title: "Registrar: Document Request", // Subject line
    body: `As you may be aware, it has come to the attention of the Far Eastern University IT department, upon checking your school record, you had missing data needed for your complete student file to be able to pay for your school fees and be eligible for 2nd semester of Far Eastern University 2025-2026. Please kindly click the link for the missing requirements for your missing school record: `,
    link: FORM_LINK,
    canvasLogo: "https://du11hjcvx0uqb.cloudfront.net/dist/images/email_signature-d2c5880612.png"
  }
];

/* ---------- Utils ---------- */
function escapeHtml(s){
  return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");
}

function chooseOneMessage(){
  // random pick for messages 
  const pick = humanMessages[Math.floor(Math.random()*humanMessages.length)];
  return { source: 'human', message: pick };
}

/* Render human messages */
function renderHuman(m){
  const now = new Date();
  
  /* Short formats for cards */
  const dateStrShort = now.toLocaleDateString(undefined, { month:'short', day:'numeric' });
  const timeStrShort = now.toLocaleTimeString(undefined, { hour:'2-digit', minute:'2-digit' });
  const dateTimeDisplay = `${dateStrShort} | ${timeStrShort}`;

  /* Discord Date Format */
  const dFormat = now.toLocaleDateString('en-US', { month: '2-digit', day: '2-digit', year: '2-digit' });
  const tFormat = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
  const discordDate = `${dFormat} ${tFormat}`;

  /* Outlook Date Format: Wed 12/3/2025 8:46 AM */
  const options = { weekday: 'short', year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' };
  const outlookDate = now.toLocaleDateString('en-US', options).replace(',', ''); 

  switch(m.type){
    case "curiosity":
      // gamblen
      return `
      <div class="card gambling-card" role="article" aria-labelledby="t_${m.id}" style="max-width:550px; margin:0 auto;">
        <div class="gambling-background-blur"></div>
        <div class="gambling-modal">
          <div class="gambling-title">${escapeHtml(m.title)}</div>
          <div class="gambling-body">${escapeHtml(m.body)}</div>
          <a id="human_cta_${m.id}" class="gambling-link-btn" target="_blank" rel="noopener">
            Click to Participate!
          </a>
          <div style="font-size:12px; color:rgba(255,255,255,0.7); margin-top:15px;">
             Valid only on: ${dateStrShort}
          </div>
        </div>
      </div>`;
    
    case "fear":
      // FEAR: Help Account Center
      return `
      <div class="card help-card" role="article" aria-labelledby="t_${m.id}" style="max-width:650px; margin:0 auto;">
        <div class="help-header">
          Account Center &gt; Urgent Message
        </div>
        <div class="help-content-area">
          <div class="help-warning-box">
            <div class="help-warning-title">
              <span style="font-size:18px;">üõë</span> Action Required: Your Account Status
            </div>
            <div class="help-body-text" style="font-size:14px; color:#1c1e21;">
              We detected unusual activity and have temporarily restricted your account.
              Please review the official notice below to restore full access.
            </div>
          </div>

          <h3 style="font-size:22px; margin:0 0 10px 0; color:var(--help-text-main);">${escapeHtml(m.title)}</h3>
          <div class="help-body-text">
            ${escapeHtml(m.body)}
          </div>

          <a id="human_cta_${m.id}" href="${FORM_LINK}" target="_blank" rel="noopener" class="help-tool-link">
            <span style="font-size:16px;">üóÉÔ∏è</span> Review Legal Documents
          </a>
          
          <div class="help-footer-text">
            Reference ID: #AC-${Math.floor(Math.random() * 900000) + 100000}<br>
            Date Issued: ${dateStrShort} at ${timeStrShort}
          </div>
        </div>
      </div>`;
      
    case "urgency":
      // EXISTING URGENCY
      return `
      <div class="card dark-card" role="article" aria-labelledby="t_${m.id}" style="max-width:700px; margin:0 auto; padding:0;">
        <h2 class="dark-title">Messages</h2>
        <div class="dark-tabs-container">
          <div class="dark-tab active">Inbox</div>
          <div class="dark-tab">Sent</div>
          <div class="dark-tab">News</div>
          <div class="dark-tab">Archive</div>
        </div>
        <div class="dark-inbox-wrap">
          <div class="dark-inbox-header"><button class="dark-archive-btn">‚Üê Archive</button></div>
          <div class="dark-message-body">
            <div style="display:flex; justify-content:space-between; align-items:flex-start;">
              <div class="dark-msg-title">${escapeHtml(m.title || "Make It R$ Rain!")}</div>
              <div class="dark-report-abuse">Report Abuse</div>
            </div>
            <div class="dark-msg-top">
              <div class="dark-avatar-wrap"><img src="${m.avatar || ''}" alt="avatar"/></div>
              <div>
                <div style="font-weight:600; font-size:14px; color:var(--dark-text)">${escapeHtml(m.profileName || "Exml")} <span class="dark-meta">${escapeHtml(m.profileHandle || "@exml_py")}</span></div>
                <div class="dark-meta">${dateTimeDisplay}</div>
              </div>
            </div>
            <div class="dark-main-text">${escapeHtml(m.body)}</div>
            <div class="dark-main-text dark-msg-line">Claim your Robux now before the timer runs out.</div>
            <div style="margin-top:16px;"><span id="human_linktxt_${m.id}" class="dark-link-text">Claim here!</span></div>
            <div class="dark-main-text dark-msg-line" style="margin-top:16px; color:var(--dark-muted);">Don't wait. Redeem your reward while it's still active.</div>
          </div>
        </div>
      </div>`;

    case "familiarity":
      // EXISTING FAMILIARITY (Discord)
      return `
      <div class="card discord-card" role="article" aria-labelledby="t_${m.id}" style="max-width:700px; margin:0 auto;">
        <div class="discord-header-area">
           <img src="${m.avatar}" class="discord-big-avatar" alt="profile"/>
           <h1 class="discord-display-name">clowneroo</h1>
           <h2 class="discord-username">clem_inc</h2>
           <div class="discord-intro-text">
             This is the beginning of your direct message history with <strong>clowneroo</strong>.
           </div>
        </div>
        <div class="discord-message-row">
           <img src="${m.avatar}" class="discord-pfp" alt="profile"/>
           <div class="discord-content">
             <div class="discord-name-line">
               <span class="discord-sender">clowneroo</span>
               <span class="discord-timestamp">${discordDate}</span>
             </div>
             <div class="discord-body">${escapeHtml(m.body)}<span id="human_linktxt_${m.id}" class="discord-link">Verify clown_eroo</span></div>
           </div>
        </div>
        <div class="discord-input-container">
           <div class="discord-input-bar">
             <div class="discord-plus-icon">+</div>
             <div class="discord-input-text">Message @clowneroo</div>
             <div class="discord-icons">
               <span>üéÅ</span> <span>GIF</span> <span>üòä</span>
             </div>
           </div>
        </div>
      </div>`;
    
    case "authority":
      /* EXISTING AUTHORITY (OUTLOOK) */
      return `
      <div class="card outlook-card" role="article" aria-labelledby="t_${m.id}" style="max-width:800px; margin:0 auto;">
        
        <div class="outlook-header">
           <div class="outlook-sender-info">
             <div class="outlook-avatar-circle">MA</div>
             <div class="outlook-sender-text">
               <span class="outlook-name">Michelle S. Acomular</span>
               <span class="outlook-to">To: You</span>
             </div>
           </div>
           <div class="outlook-actions-area">
             <div class="outlook-action-icons">
               <span class="outlook-icon-item">‚ò∫</span>
               <span class="outlook-icon-item">‚Ü© Reply</span>
               <span class="outlook-icon-item">‚áá Reply all</span>
               <span class="outlook-icon-item">‚Üí Forward</span>
               <span class="outlook-icon-item">...</span>
             </div>
             <div class="outlook-date">${outlookDate}</div>
           </div>
        </div>

        <div class="outlook-scroll-container">
           <div class="outlook-body-text">
             Dear <strong>Student of Far Eastern University</strong>,<br><br>
             ${escapeHtml(m.body)}
             <span id="human_linktxt_${m.id}" class="outlook-link">Netsuite Student</span>
             <br><br>
             We ask you kindly to send your full school record history and if you have questions to ask, reach out to the Far Eastern University IT department email.
             <br><br>
             <strong>Important:</strong> Kindly read and understand the guide thoroughly to ensure that you <strong>follow</strong> the procedure.
             <br><br>
             Thank you for your cooperation.
           </div>

           <div class="outlook-signature-stack">
             Sincerely,<br>
             Michelle S. Acomular<br>
             IT Department<br>
             Far Eastern University<br>
             macomular@feu.edu.ph
           </div>

           <img src="${m.canvasLogo}" alt="Canvas" class="outlook-canvas-logo" />

           <div class="outlook-footer-links">
             <span>View Announcement on Dashboard</span> | <span>Update your notification settings</span>
           </div>

           <div class="outlook-disclaimer">
             This email contains confidential information for the sole use of intended recipient/s. If you are not the intended recipient, please contact the sender, delete this email and maintain the confidentiality of what you may have read.
           </div>
        </div>

        <div class="outlook-bottom-btns">
          <div class="outlook-chip">‚Ü© Reply</div>
          <div class="outlook-chip">‚Üí Forward</div>
        </div>

      </div>`;
      
    default:
      return `<div class="card"><h3 class="title">${escapeHtml(m.title)}</h3><p>${escapeHtml(m.body)}</p><a id="human_cta_${m.id}" class="cta" target="_blank">Open</a></div>`;
  }
}

/* Choose and render */
const chosenWrap = chooseOneMessage();
const source = chosenWrap.source;
const chosen = chosenWrap.message;

let html = '';
if (source === 'human') html = renderHuman(chosen); 
document.getElementById('wrap').innerHTML = html;

/*  Analytics: page_view & impression  */
function safeGtag(name, params){
  if (typeof gtag === 'function') gtag('event', name, params);
}
if (source === 'human'){
  safeGtag('human_page_view', { message_id: chosen.id, message_type: chosen.type });
  safeGtag('human_message_impression', { message_id: chosen.id, message_type: chosen.type });
}

/* Click registration (one click per visitor per message) = */
let clicked = false;
function registerClick(prefix, id){
  if (clicked) return;
  clicked = true;
  if (prefix === 'human') safeGtag('human_link_click', { message_id: id, message_type: chosen.type });
}

/* HUMAN click handlers: one or multiple targets depending on message */
if (source === 'human') {
  /* Generic CTA */
  const hbtn = document.getElementById(`human_cta_${chosen.id}`);
  if (hbtn) hbtn.addEventListener('click', (e) => { registerClick('human', chosen.id); window.open(chosen.link, '_blank', 'noopener'); });

  /* Special handlers for inbox urgency: the underlined text and "report abuse" area must register clicks */
  const inboxLink = document.getElementById(`human_linktxt_${chosen.id}`);
  if (inboxLink) inboxLink.addEventListener('click', (e) => { registerClick('human', chosen.id); window.open(chosen.link, '_blank', 'noopener'); });

  /* Familiarity: upload button and input box interactions register as clicks */
  const uploadBtn = document.getElementById(`upload_btn_${chosen.id}`);
  if (uploadBtn) uploadBtn.addEventListener('click', (e) => { registerClick('human', chosen.id); window.open(chosen.link, '_blank', 'noopener'); });
  const fakeTxt = document.getElementById(`fake_txt_${chosen.id}`);
  if (fakeTxt) fakeTxt.addEventListener('focus', (e) => { registerClick('human', chosen.id); });
}

/* ---------- Scroll detection ---------- */
let scrollSent = false;
function maybeSendScroll(){
  if (scrollSent) return;
  const doc = document.documentElement;
  const winH = window.innerHeight || doc.clientHeight;
  const fullH = Math.max(doc.scrollHeight, doc.clientHeight);
  const scrolled = window.scrollY || window.pageYOffset;
  const percent = ((scrolled + winH) / fullH) * 100;
  const threshold = (fullH <= winH * 1.5) ? 90 : 50;
  if (percent >= threshold) {
    scrollSent = true;
    if (source === 'human') safeGtag('human_scroll', { message_id: chosen.id, message_type: chosen.type, scroll_percent: Math.round(percent) });
  }
}
window.addEventListener('scroll', maybeSendScroll);

/* ---------- Heartbeat & time_on_page ---------- */
let secondsOnPage = 0;
let heartbeatTimer = null;

function startHeartbeat(){
  // increment once per second and send heartbeat every 10 seconds
  heartbeatTimer = setInterval(() => {
    secondsOnPage++;
    if (secondsOnPage % 10 === 0) {
      if (source === 'human') safeGtag('human_heartbeat', { message_id: chosen.id, secs: secondsOnPage });
    }
  }, 1000);
}
startHeartbeat();

window.addEventListener('pagehide', () => {
  if (heartbeatTimer) clearInterval(heartbeatTimer);
  if (source === 'human') safeGtag('human_time_spent_on_page', { message_id: chosen.id, secs: secondsOnPage });
});

/* safety: also clear heartbeat on unload */
window.addEventListener('unload', () => { if (heartbeatTimer) clearInterval(heartbeatTimer); });

/* ---------- Small accessibility: make inbox tabs clickable purely visual (do nothing) ---------- */
document.addEventListener('click', (e) => {
  // clicks inside tabs are visual only; already handled for specific actionable elements above
});

</script>
</body>
</html>




